const React=window.React,{useState:useState,useRef:useRef,useEffect:useEffect}=React,OrangeHelpSearch=({searchEndpoint:e})=>{const[t,n]=useState(""),[s,a]=useState([]),[o,r]=useState(!1),[i,l]=useState(null),c=useRef(null),[d,u]=useState(""),[m,p]=useState([]);useEffect(()=>{c.current?.scrollIntoView({behavior:"smooth"})},[s,d]);const h=async()=>{if(!t.trim()||o)return;r(!0),l(null);const s={type:"user",content:t},i=[...m,{role:"user",content:t}];a(e=>[...e,s]),p(i),n("");try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,history:i})});if(!n.ok)throw Error("Erreur r√©seau");const s=await n.json(),o=s.results[0].content;let c="";for(u(""),let e=0;e<o.length;e++)await new Promise(e=>setTimeout(e,20)),c+=o[e],u(c);const d={type:"assistant",content:o};a(e=>[...e,d]),p(e=>[...e,{role:"assistant",content:o}]),u("")}catch(e){console.error("Error:",e),l("Une erreur est survenue lors de la communication avec l'assistant")}finally{r(!1)}},f=e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),h())};return React.createElement("div",{className:"max-w-4xl mx-auto p-4"},React.createElement("div",{className:"mb-4 min-h-[200px] max-h-[500px] overflow-y-auto bg-black bg-opacity-50 rounded-lg p-4"},s.map((e,t)=>React.createElement("div",{key:t,className:`mb-4 ${e.type==="user"?"text-right":"text-left"}`},React.createElement("div",{className:`inline-block p-3 rounded-lg max-w-[80%] ${e.type==="user"?"bg-orange-500 text-white":"bg-white bg-opacity-10 text-white"}`},e.content))),d&&React.createElement("div",{className:"text-left"},React.createElement("div",{className:"inline-block p-3 rounded-lg max-w-[80%] bg-white bg-opacity-10 text-white"},d)),React.createElement("div",{ref:c})),React.createElement("div",{className:"relative flex items-center"},React.createElement("textarea",{value:t,onChange:e=>n(e.target.value),onKeyPress:f,placeholder:"Comment pouvons-nous vous aider ?",className:"w-full p-4 pr-12 text-lg border rounded-lg bg-black bg-opacity-50 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-orange-500 resize-none",rows:"1",style:{minHeight:"60px"}}),React.createElement("button",{onClick:h,className:"absolute right-4 text-white hover:text-orange-500 transition-colors",disabled:o},o?React.createElement("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"}):React.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})))),i&&React.createElement("div",{className:"mt-2 text-red-500 text-sm"},i))};window.OrangeHelpSearch=OrangeHelpSearch;
